#!/usr/bin/env bash
set -euo pipefail

echo "Running pre-commit checks..."

cargo fmt -- --check || {
    echo "Formatting check failed. Run 'cargo fmt' to fix."
    exit 1
}

cargo clippy -- -D warnings || {
    echo "Clippy check failed. Fix the warnings above."
    exit 1
}

cargo test || {
    echo "Tests failed."
    exit 1
}

bash scripts/check-file-sizes.sh || {
    echo "File size check failed."
    exit 1
}

echo "All pre-commit checks passed."
